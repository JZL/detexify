/*
 * Raphael 1.3.1 - JavaScript Vector Library
 *
 * Copyright (c) 2008 - 2009 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael=function(){function t(t,e,r){function i(){var s=Array[b].slice.call(arguments,0),a=s[x]("\u25ba"),n=i.cache=i.cache||{},o=i.count=i.count||[];return n[v](a)?r?r(n[a]):n[a]:(o[m]>=1e3&&delete n[o.shift()],o[A](a),n[a]=t[f](e,s),r?r(n[a]):n[a])}return i}function e(){return this.x+d+this.y}function r(t){return function(e,r,i,s){var a={back:t};return h.is(i,"function")?s=i:a.rot=i,e&&e.constructor==xt&&(e=e.attrs.path),e&&(a.along=e),this.animate(a,r,s)}}var i=/[, ]+/,s=/^(circle|rect|path|ellipse|text|image)$/,a=document,n=window,o={was:"Raphael"in n,is:n.Raphael},h=function(){if(h.is(arguments[0],"array")){for(var t=arguments[0],e=Ct[f](h,t.splice(0,3+h.is(t[0],C))),r=e.set(),i=0,a=t[m];a>i;i++){var n=t[i]||{};s.test(n.type)&&r[A](e[n.type]().attr(n))}return r}return Ct[f](h,arguments)},l=function(){},c="appendChild",f="apply",u="concat",p="",d=" ",g="split",y="click dblclick mousedown mousemove mouseout mouseover mouseup"[g](d),v="hasOwnProperty",x="join",m="length",b="prototype",w=String[b].toLowerCase,k=Math,_=k.max,B=k.min,C="number",N="toString",z=Object[b][N],G=k.pow,A="push",S=/^(?=[\da-f]$)/,M=/^url\(['"]?([^\)]+)['"]?\)$/i,j=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgb\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|rgb\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i,T=k.round,R="setAttribute",q=parseFloat,E=parseInt,V=String[b].toUpperCase,F={"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},H={along:"along","clip-rect":"csv",cx:C,cy:C,fill:"colour","fill-opacity":C,"font-size":C,height:C,opacity:C,path:"path",r:C,rotation:"csv",rx:C,ry:C,scale:"csv",stroke:"colour","stroke-opacity":C,"stroke-width":C,translation:"csv",width:C,x:C,y:C},L="replace";if(h.version="1.3.1",h.type=n.SVGAngle||a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==h.type){var W=document.createElement("div");if(W.innerHTML="<!--[if vml]><br><br><![endif]-->",2!=W.childNodes[m])return null}h.svg=!(h.vml="VML"==h.type),l[b]=h[b],h._id=0,h._oid=0,h.fn={},h.is=function(t,e){return e=w.call(e),("object"==e||"undefined"==e)&&typeof t==e||null==t&&"null"==e||w.call(z.call(t).slice(8,-1))==e},h.setWindow=function(t){n=t,a=n.document};var P=function(e){if(h.vml){var r=/^\s+|\s+$/g;P=t(function(t){var e;t=(t+p)[L](r,p);try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(s){e=createPopup().document.body}var a=e.createTextRange();try{e.style.color=t;var n=a.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n[N](16)).slice(-6)}catch(s){return"none"}})}else{var i=a.createElement("i");i.title="Rapha\xebl Colour Picker",i.style.display="none",a.body[c](i),P=t(function(t){return i.style.color=t,a.defaultView.getComputedStyle(i,p).getPropertyValue("color")})}return P(e)};h.hsb2rgb=t(function(t,e,r){h.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,t=t.h);var i,s,a;if(0==r)return{r:0,g:0,b:0,hex:"#000"};(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255);var n=~~(6*t),o=6*t-n,l=r*(1-e),c=r*(1-e*o),f=r*(1-e*(1-o));i=[r,c,l,l,f,r,r][n],s=[f,r,r,c,l,l,f][n],a=[l,l,f,r,r,c,l][n],i*=255,s*=255,a*=255;var u={r:i,g:s,b:a},p=(~~i)[N](16),d=(~~s)[N](16),g=(~~a)[N](16);return p=p[L](S,"0"),d=d[L](S,"0"),g=g[L](S,"0"),u.hex="#"+p+d+g,u},h),h.rgb2hsb=t(function(t,e,r){if(h.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,e=t.g,t=t.r),h.is(t,"string")){var i=h.getRGB(t);t=i.r,e=i.g,r=i.b}(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255);var s,a,n=_(t,e,r),o=B(t,e,r),l=n;if(o==n)return{h:0,s:0,b:n};var c=n-o;return a=c/n,s=t==n?(e-r)/c:e==n?2+(r-t)/c:4+(t-e)/c,s/=6,0>s&&s++,s>1&&s--,{h:s,s:a,b:l}},h);var O=/,?([achlmqrstvxz]),?/gi;h._path2string=function(){return this.join(",")[L](O,"$1")},h.getRGB=t(function(t){if(!t||(t+=p).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none"};!({hs:1,rg:1}[v](t.substring(0,2))||"#"==t.charAt())&&(t=P(t));var e,r,i,s,a=t.match(j);if(a){if(a[2]&&(i=E(a[2].substring(5),16),r=E(a[2].substring(3,5),16),e=E(a[2].substring(1,3),16)),a[3]&&(i=E((s=a[3].charAt(3))+s,16),r=E((s=a[3].charAt(2))+s,16),e=E((s=a[3].charAt(1))+s,16)),a[4]&&(a=a[4][g](/\s*,\s*/),e=q(a[0]),r=q(a[1]),i=q(a[2])),a[5]&&(a=a[5][g](/\s*,\s*/),e=2.55*q(a[0]),r=2.55*q(a[1]),i=2.55*q(a[2])),a[6])return a=a[6][g](/\s*,\s*/),e=q(a[0]),r=q(a[1]),i=q(a[2]),h.hsb2rgb(e,r,i);if(a[7])return a=a[7][g](/\s*,\s*/),e=2.55*q(a[0]),r=2.55*q(a[1]),i=2.55*q(a[2]),h.hsb2rgb(e,r,i);a={r:e,g:r,b:i};var n=(~~e)[N](16),o=(~~r)[N](16),l=(~~i)[N](16);return n=n[L](S,"0"),o=o[L](S,"0"),l=l[L](S,"0"),a.hex="#"+n+o+l,a}return{r:-1,g:-1,b:-1,hex:"none",error:1}},h),h.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},h.getColor.reset=function(){delete this.start},h.parsePathString=t(function(t){if(!t)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return h.is(t,"array")&&h.is(t[0],"array")&&(r=I(t)),r[m]||(t+p)[L](/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,function(t,i,s){var a=[],n=w.call(i);for(s[L](/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,function(t,e){e&&a[A](+e)});a[m]>=e[n]&&(r[A]([i][u](a.splice(0,e[n]))),e[n]););}),r[N]=h._path2string,r}),h.findDotsAtSegment=function(t,e,r,i,s,a,n,o,h){var l=1-h,c=G(l,3)*t+3*G(l,2)*h*r+3*l*h*h*s+G(h,3)*n,f=G(l,3)*e+3*G(l,2)*h*i+3*l*h*h*a+G(h,3)*o,u=t+2*h*(r-t)+h*h*(s-2*r+t),p=e+2*h*(i-e)+h*h*(a-2*i+e),d=r+2*h*(s-r)+h*h*(n-2*s+r),g=i+2*h*(a-i)+h*h*(o-2*a+i),y=(1-h)*t+h*r,v=(1-h)*e+h*i,x=(1-h)*s+h*n,m=(1-h)*a+h*o,b=90-180*k.atan((u-d)/(p-g))/k.PI;return(u>d||g>p)&&(b+=180),{x:c,y:f,m:{x:u,y:p},n:{x:d,y:g},start:{x:y,y:v},end:{x:x,y:m},alpha:b}};var Y=t(function(t){if(!t)return{x:0,y:0,width:0,height:0};t=K(t);for(var e,r=0,i=0,s=[],a=[],n=0,o=t[m];o>n;n++)if(e=t[n],"M"==e[0])r=e[1],i=e[2],s[A](r),a[A](i);else{var h=J(r,i,e[1],e[2],e[3],e[4],e[5],e[6]);s=s[u](h.min.x,h.max.x),a=a[u](h.min.y,h.max.y),r=e[5],i=e[6]}var l=B[f](0,s),c=B[f](0,a);return{x:l,y:c,width:_[f](0,s)-l,height:_[f](0,a)-c}}),I=function(t){var e=[];h.is(t,"array")&&h.is(t&&t[0],"array")||(t=h.parsePathString(t));for(var r=0,i=t[m];i>r;r++){e[r]=[];for(var s=0,a=t[r][m];a>s;s++)e[r][s]=t[r][s]}return e[N]=h._path2string,e},X=t(function(t){h.is(t,"array")&&h.is(t&&t[0],"array")||(t=h.parsePathString(t));var e=[],r=0,i=0,s=0,a=0,n=0;"M"==t[0][0]&&(r=t[0][1],i=t[0][2],s=r,a=i,n++,e[A](["M",r,i]));for(var o=n,l=t[m];l>o;o++){var c=e[o]=[],f=t[o];if(f[0]!=w.call(f[0]))switch(c[0]=w.call(f[0]),c[0]){case"a":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+(f[6]-r).toFixed(3),c[7]=+(f[7]-i).toFixed(3);break;case"v":c[1]=+(f[1]-i).toFixed(3);break;case"m":s=f[1],a=f[2];default:for(var u=1,p=f[m];p>u;u++)c[u]=+(f[u]-(u%2?r:i)).toFixed(3)}else{c=e[o]=[],"m"==f[0]&&(s=f[1]+r,a=f[2]+i);for(var d=0,g=f[m];g>d;d++)e[o][d]=f[d]}var y=e[o][m];switch(e[o][0]){case"z":r=s,i=a;break;case"h":r+=+e[o][y-1];break;case"v":i+=+e[o][y-1];break;default:r+=+e[o][y-2],i+=+e[o][y-1]}}return e[N]=h._path2string,e},0,I),D=t(function(t){h.is(t,"array")&&h.is(t&&t[0],"array")||(t=h.parsePathString(t));var e=[],r=0,i=0,s=0,a=0,n=0;"M"==t[0][0]&&(r=+t[0][1],i=+t[0][2],s=r,a=i,n++,e[0]=["M",r,i]);for(var o=n,l=t[m];l>o;o++){var c=e[o]=[],f=t[o];if(f[0]!=V.call(f[0]))switch(c[0]=V.call(f[0]),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+(f[6]+r),c[7]=+(f[7]+i);break;case"V":c[1]=+f[1]+i;break;case"H":c[1]=+f[1]+r;break;case"M":s=+f[1]+r,a=+f[2]+i;default:for(var u=1,p=f[m];p>u;u++)c[u]=+f[u]+(u%2?r:i)}else for(var d=0,g=f[m];g>d;d++)e[o][d]=f[d];switch(c[0]){case"Z":r=s,i=a;break;case"H":r=c[1];break;case"V":i=c[1];break;default:r=e[o][e[o][m]-2],i=e[o][e[o][m]-1]}}return e[N]=h._path2string,e},null,I),$=function(t,e,r,i){return[t,e,r,i,r,i]},U=function(t,e,r,i,s,a){var n=1/3,o=2/3;return[n*t+o*r,n*e+o*i,n*s+o*r,n*a+o*i,s,a]},Z=function(e,r,i,s,a,n,o,h,l,c){var f,p=k.PI,d=120*p/180,y=p/180*(+a||0),v=[],b=t(function(t,e,r){var i=t*k.cos(r)-e*k.sin(r),s=t*k.sin(r)+e*k.cos(r);return{x:i,y:s}});if(c)M=c[0],j=c[1],A=c[2],S=c[3];else{f=b(e,r,-y),e=f.x,r=f.y,f=b(h,l,-y),h=f.x,l=f.y;var w=(k.cos(p/180*a),k.sin(p/180*a),(e-h)/2),B=(r-l)/2;i=_(i,k.abs(w)),s=_(s,k.abs(B));var C=w*w/(i*i)+B*B/(s*s);C>1&&(i=k.sqrt(C)*i,s=k.sqrt(C)*s);var N=i*i,z=s*s,G=(n==o?-1:1)*k.sqrt(k.abs((N*z-N*B*B-z*w*w)/(N*B*B+z*w*w))),A=G*i*B/s+(e+h)/2,S=G*-s*w/i+(r+l)/2,M=k.asin(((r-S)/s).toFixed(7)),j=k.asin(((l-S)/s).toFixed(7));M=A>e?p-M:M,j=A>h?p-j:j,0>M&&(M=2*p+M),0>j&&(j=2*p+j),o&&M>j&&(M-=2*p),!o&&j>M&&(j-=2*p)}var T=j-M;if(k.abs(T)>d){var R=j,q=h,E=l;j=M+d*(o&&j>M?1:-1),h=A+i*k.cos(j),l=S+s*k.sin(j),v=Z(h,l,i,s,a,0,o,q,E,[j,R,A,S])}T=j-M;var V=k.cos(M),F=k.sin(M),H=k.cos(j),L=k.sin(j),W=k.tan(T/4),P=4/3*i*W,O=4/3*s*W,Y=[e,r],I=[e+P*F,r-O*V],X=[h+P*L,l-O*H],D=[h,l];if(I[0]=2*Y[0]-I[0],I[1]=2*Y[1]-I[1],c)return[I,X,D][u](v);v=[I,X,D][u](v)[x]()[g](",");for(var $=[],U=0,Q=v[m];Q>U;U++)$[U]=U%2?b(v[U-1],v[U],y).y:b(v[U],v[U+1],y).x;return $},Q=function(t,e,r,i,s,a,n,o,h){var l=1-h;return{x:G(l,3)*t+3*G(l,2)*h*r+3*l*h*h*s+G(h,3)*n,y:G(l,3)*e+3*G(l,2)*h*i+3*l*h*h*a+G(h,3)*o}},J=t(function(t,e,r,i,s,a,n,o){var h,l=s-2*r+t-(n-2*s+r),c=2*(r-t)-2*(s-r),u=t-r,p=(-c+k.sqrt(c*c-4*l*u))/2/l,d=(-c-k.sqrt(c*c-4*l*u))/2/l,g=[e,o],y=[t,n];return k.abs(p)>1e12&&(p=.5),k.abs(d)>1e12&&(d=.5),p>0&&1>p&&(h=Q(t,e,r,i,s,a,n,o,p),y[A](h.x),g[A](h.y)),d>0&&1>d&&(h=Q(t,e,r,i,s,a,n,o,d),y[A](h.x),g[A](h.y)),l=a-2*i+e-(o-2*a+i),c=2*(i-e)-2*(a-i),u=e-i,p=(-c+k.sqrt(c*c-4*l*u))/2/l,d=(-c-k.sqrt(c*c-4*l*u))/2/l,k.abs(p)>1e12&&(p=.5),k.abs(d)>1e12&&(d=.5),p>0&&1>p&&(h=Q(t,e,r,i,s,a,n,o,p),y[A](h.x),g[A](h.y)),d>0&&1>d&&(h=Q(t,e,r,i,s,a,n,o,d),y[A](h.x),g[A](h.y)),{min:{x:B[f](0,y),y:B[f](0,g)},max:{x:_[f](0,y),y:_[f](0,g)}}}),K=t(function(t,e){for(var r=D(t),i=e&&D(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n=(function(t,e){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][u](Z[f](0,[e.x,e.y][u](t.slice(1))));break;case"S":r=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",r,i][u](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][u](U(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][u](U(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][u]($(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][u]($(e.x,e.y,t[1],e.y));break;case"V":t=["C"][u]($(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][u]($(e.x,e.y,e.X,e.Y))}return t}),o=function(t,e){if(t[e][m]>7){t[e].shift();for(var s=t[e];s[m];)t.splice(e++,0,["C"][u](s.splice(0,6)));t.splice(e,1),c=_(r[m],i&&i[m]||0)}},h=function(t,e,s,a,n){t&&e&&"M"==t[n][0]&&"M"!=e[n][0]&&(e.splice(n,0,["M",a.x,a.y]),s.bx=0,s.by=0,s.x=t[n][1],s.y=t[n][2],c=_(r[m],i&&i[m]||0))},l=0,c=_(r[m],i&&i[m]||0);c>l;l++){r[l]=n(r[l],s),o(r,l),i&&(i[l]=n(i[l],a)),i&&o(i,l),h(r,i,s,a,l),h(i,r,a,s,l);var p=r[l],d=i&&i[l],g=p[m],y=i&&d[m];s.x=p[g-2],s.y=p[g-1],s.bx=q(p[g-4])||s.x,s.by=q(p[g-3])||s.y,a.bx=i&&(q(d[y-4])||a.x),a.by=i&&(q(d[y-3])||a.y),a.x=i&&d[y-2],a.y=i&&d[y-1]}return i?[r,i]:r},null,I),tt=t(function(t){for(var e=[],r=0,i=t[m];i>r;r++){var s={},a=t[r].match(/^([^:]*):?([\d\.]*)/);if(s.color=h.getRGB(a[1]),s.color.error)return null;s.color=s.color.hex,a[2]&&(s.offset=a[2]+"%"),e[A](s)}for(var r=1,i=e[m]-1;i>r;r++)if(!e[r].offset){for(var n=q(e[r-1].offset||0),o=0,l=r+1;i>l;l++)if(e[l].offset){o=e[l].offset;break}o||(o=100,l=i),o=q(o);for(var c=(o-n)/(l-r+1);l>r;r++)n+=c,e[r].offset=n+"%"}return e}),et=function(){var t;if(h.is(arguments[0],"string")||h.is(arguments[0],"object")){if(t=h.is(arguments[0],"string")?a.getElementById(arguments[0]):arguments[0],t.tagName)return null==arguments[1]?{container:t,width:t.style.pixelWidth||t.offsetWidth,height:t.style.pixelHeight||t.offsetHeight}:{container:t,width:arguments[1],height:arguments[2]}}else if(h.is(arguments[0],C)&&arguments[m]>3)return{container:1,x:arguments[0],y:arguments[1],width:arguments[2],height:arguments[3]}},rt=function(t,e){var r=this;for(var i in e)if(e[v](i)&&!(i in t))switch(typeof e[i]){case"function":!function(e){t[i]=t===r?e:function(){return e[f](r,arguments)}}(e[i]);break;case"object":t[i]=t[i]||{},rt.call(this,t[i],e[i]);break;default:t[i]=e[i]}},it=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},st=function(t,e){e.top!==t&&(it(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},at=function(t,e){e.bottom!==t&&(it(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},nt=function(t,e,r){it(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},ot=function(t,e,r){it(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},ht=function(t){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object")}},lt=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;if(h.svg){l[b].svgns="http://www.w3.org/2000/svg",l[b].xlink="http://www.w3.org/1999/xlink";var T=function(t){return+t+.5*(~~t===t)},ct=function(t){for(var e=0,r=t[m];r>e;e++)if("a"!=w.call(t[e][0]))for(var i=1,s=t[e][m];s>i;i++)t[e][i]=T(t[e][i]);else t[e][6]=T(t[e][6]),t[e][7]=T(t[e][7]);return t},ft=function(t,e){if(!e)return a.createElementNS(l[b].svgns,t);for(var r in e)e[v](r)&&t[R](r,e[r])};h[N]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var ut=function(t,e){var r=ft("path");e.canvas&&e.canvas[c](r);var i=new xt(r,e);return i.type="path",gt(i,{fill:"none",stroke:"#000",path:t}),i},pt=function(t,e,r){var i="linear",s=.5,a=.5,n=t.style;if(e=(e+p)[L](lt,function(t,e,r){if(i="radial",e&&r){s=q(e),a=q(r);var n=2*(a>.5)-1;G(s-.5,2)+G(a-.5,2)>.25&&(a=k.sqrt(.25-G(s-.5,2))*n+.5)&&.5!=a&&(a=a.toFixed(5)-1e-5*n)}return p}),e=e[g](/\s*\-\s*/),"linear"==i){var o=e.shift();if(o=-q(o),isNaN(o))return null;var l=[0,0,k.cos(o*k.PI/180),k.sin(o*k.PI/180)],f=1/(_(k.abs(l[2]),k.abs(l[3]))||1);l[2]*=f,l[3]*=f,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0)}var u=tt(e);if(!u)return null;var d=ft(i+"Gradient");d.id="r"+(h._id++)[N](36),ft(d,"radial"==i?{fx:s,fy:a}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),r.defs[c](d);for(var y=0,v=u[m];v>y;y++){var x=ft("stop");ft(x,{offset:u[y].offset?u[y].offset:y?"100%":"0%","stop-color":u[y].color||"#fff"}),d[c](x)}return ft(t,{fill:"url(#"+d.id+")",opacity:1,"fill-opacity":1}),n.fill=p,n.opacity=1,n.fillOpacity=1,1},dt=function(t){var e=t.getBBox();ft(t.pattern,{patternTransform:h.format("translate({0},{1})",e.x,e.y)})},gt=function(t,e){var r={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},s=t.node,n=t.attrs,o=t.rotate(),l=function(t,i){if(i=r[w.call(i)]){for(var a=t.attrs["stroke-width"]||"1",n={round:a,square:a,butt:0}[t.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,o=[],h=i[m];h--;)o[h]=i[h]*a+(h%2?1:-1)*n;ft(s,{"stroke-dasharray":o[x](",")})}};e[v]("rotation")&&(o=e.rotation);var f=(o+p)[g](i);f.length-1?(f[1]=+f[1],f[2]=+f[2]):f=null,q(o)&&t.rotate(0,!0);for(var u in e)if(e[v](u)){if(!F[v](u))continue;var y=e[u];switch(n[u]=y,u){case"rotation":t.rotate(y,!0);break;case"href":case"title":case"target":var b=s.parentNode;if("a"!=w.call(b.tagName)){var k=ft("a");b.insertBefore(k,s),k[c](s),b=k}b.setAttributeNS(t.paper.xlink,u,y);break;case"cursor":s.style.cursor=y;break;case"clip-rect":var _=(y+p)[g](i);if(4==_[m]){t.clip&&t.clip.parentNode.parentNode.removeChild(t.clip.parentNode);var B=ft("clipPath"),C=ft("rect");B.id="r"+(h._id++)[N](36),ft(C,{x:_[0],y:_[1],width:_[2],height:_[3]}),B[c](C),t.paper.defs[c](B),ft(s,{"clip-path":"url(#"+B.id+")"}),t.clip=C}if(!y){var z=a.getElementById(s.getAttribute("clip-path")[L](/(^url\(#|\)$)/g,p));z&&z.parentNode.removeChild(z),ft(s,{"clip-path":p}),delete t.clip}break;case"path":y&&"path"==t.type&&(n.path=ct(D(y)),ft(s,{d:n.path}));break;case"width":if(s[R](u,y),!n.fx)break;u="x",y=n.x;case"x":n.fx&&(y=-n.x-(n.width||0));case"rx":if("rx"==u&&"rect"==t.type)break;case"cx":f&&("x"==u||"cx"==u)&&(f[1]+=y-n[u]),s[R](u,T(y)),t.pattern&&dt(t);break;case"height":if(s[R](u,y),!n.fy)break;u="y",y=n.y;case"y":n.fy&&(y=-n.y-(n.height||0));case"ry":if("ry"==u&&"rect"==t.type)break;case"cy":f&&("y"==u||"cy"==u)&&(f[2]+=y-n[u]),s[R](u,T(y)),t.pattern&&dt(t);break;case"r":"rect"==t.type?ft(s,{rx:y,ry:y}):s[R](u,y);break;case"src":"image"==t.type&&s.setAttributeNS(t.paper.xlink,"href",y);break;case"stroke-width":s.style.strokeWidth=y,s[R](u,y),n["stroke-dasharray"]&&l(t,n["stroke-dasharray"]);break;case"stroke-dasharray":l(t,y);break;case"translation":var G=(y+p)[g](i);G[0]=+G[0]||0,G[1]=+G[1]||0,f&&(f[1]+=G[0],f[2]+=G[1]),Ht.call(t,G[0],G[1]);break;case"scale":var G=(y+p)[g](i);t.scale(+G[0]||1,+G[1]||+G[0]||1,+G[2]||null,+G[3]||null);break;case"fill":var A=(y+p).match(M);if(A){var B=ft("pattern"),S=ft("image");B.id="r"+(h._id++)[N](36),ft(B,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),ft(S,{x:0,y:0}),S.setAttributeNS(t.paper.xlink,"href",A[1]),B[c](S);var j=a.createElement("img");j.style.cssText="position:absolute;left:-9999em;top-9999em",j.onload=function(){ft(B,{width:this.offsetWidth,height:this.offsetHeight}),ft(S,{width:this.offsetWidth,height:this.offsetHeight}),a.body.removeChild(this),t.paper.safari()},a.body[c](j),j.src=A[1],t.paper.defs[c](B),s.style.fill="url(#"+B.id+")",ft(s,{fill:"url(#"+B.id+")"}),t.pattern=B,t.pattern&&dt(t);break}if(h.getRGB(y).error){if(({circle:1,ellipse:1}[v](t.type)||"r"!=(y+p).charAt())&&pt(s,y,t.paper)){n.gradient=y,n.fill="none";break}}else delete e.gradient,delete n.gradient,!h.is(n.opacity,"undefined")&&h.is(e.opacity,"undefined")&&ft(s,{opacity:n.opacity}),!h.is(n["fill-opacity"],"undefined")&&h.is(e["fill-opacity"],"undefined")&&ft(s,{"fill-opacity":n["fill-opacity"]});case"stroke":s[R](u,h.getRGB(y).hex);break;case"gradient":(({circle:1,ellipse:1})[v](t.type)||"r"!=(y+p).charAt())&&pt(s,y,t.paper);break;case"opacity":case"fill-opacity":if(n.gradient){var H=a.getElementById(s.getAttribute("fill")[L](/^url\(#|\)$/g,p));if(H){var W=H.getElementsByTagName("stop");W[W[m]-1][R]("stop-opacity",y)}break}default:"font-size"==u&&(y=E(y,10)+"px");var P=u[L](/(\-.)/g,function(t){return V.call(t.substring(1))});s.style[P]=y,s[R](u,y)}}vt(t,e),f?t.rotate(f.join(d)):q(o)&&t.rotate(o,!0)},yt=1.2,vt=function(t,e){if("text"==t.type&&(e[v]("text")||e[v]("font")||e[v]("font-size")||e[v]("x")||e[v]("y"))){var r=t.attrs,i=t.node,s=i.firstChild?E(a.defaultView.getComputedStyle(i.firstChild,p).getPropertyValue("font-size"),10):10;if(e[v]("text")){for(r.text=e.text;i.firstChild;)i.removeChild(i.firstChild);for(var n=(e.text+p)[g]("\n"),o=0,h=n[m];h>o;o++)if(n[o]){var l=ft("tspan");o&&ft(l,{dy:s*yt,x:r.x}),l[c](a.createTextNode(n[o])),i[c](l)}}else for(var n=i.getElementsByTagName("tspan"),o=0,h=n[m];h>o;o++)o&&ft(n[o],{dy:s*yt,x:r.x});ft(i,{y:r.y});var f=t.getBBox(),u=r.y-(f.y+f.height/2);u&&isFinite(u)&&ft(i,{y:r.y+u})}},xt=function(t,e){this[0]=t,this.id=h._oid++,this.node=t,t.raphael=this,this.paper=e,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null};xt[b].rotate=function(t,e,r){if(this.removed)return this;if(null==t)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][x](d):this._.rt.deg;var s=this.getBBox();return t=(t+p)[g](i),t[m]-1&&(e=q(t[1]),r=q(t[2])),t=q(t[0]),null!=e?this._.rt.deg=t:this._.rt.deg+=t,null==r&&(e=null),this._.rt.cx=e,this._.rt.cy=r,e=null==e?s.x+s.width/2:e,r=null==r?s.y+s.height/2:r,this._.rt.deg?(this.transformations[0]=h.format("rotate({0} {1} {2})",this._.rt.deg,e,r),this.clip&&ft(this.clip,{transform:h.format("rotate({0} {1} {2})",-this._.rt.deg,e,r)})):(this.transformations[0]=p,this.clip&&ft(this.clip,{transform:p})),ft(this.node,{transform:this.transformations[x](d)}),this},xt[b].hide=function(){return!this.removed&&(this.node.style.display="none"),this},xt[b].show=function(){return!this.removed&&(this.node.style.display=""),this},xt[b].remove=function(){if(!this.removed){it(this,this.paper),this.node.parentNode.removeChild(this.node);for(var t in this)delete this[t];this.removed=!0}},xt[b].getBBox=function(){if(this.removed)return this;if("path"==this.type)return Y(this.attrs.path);if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(r){}finally{e=e||{}}if("text"==this.type){e={x:e.x,y:1/0,width:0,height:0};for(var i=0,s=this.node.getNumberOfChars();s>i;i++){var a=this.node.getExtentOfChar(i);a.y<e.y&&(e.y=a.y),a.y+a.height-e.y>e.height&&(e.height=a.y+a.height-e.y),a.x+a.width-e.x>e.width&&(e.width=a.x+a.width-e.x)}}return t&&this.hide(),e},xt[b].attr=function(){if(this.removed)return this;if(0==arguments[m]){var t={};for(var e in this.attrs)this.attrs[v](e)&&(t[e]=this.attrs[e]);return this._.rt.deg&&(t.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(t.scale=this.scale()),t.gradient&&"none"==t.fill&&(t.fill=t.gradient)&&delete t.gradient,t}if(1==arguments[m]&&h.is(arguments[0],"string"))return"translation"==arguments[0]?Ht.call(this):"rotation"==arguments[0]?this.rotate():"scale"==arguments[0]?this.scale():"fill"==arguments[0]&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[arguments[0]];if(1==arguments[m]&&h.is(arguments[0],"array")){var r={};for(var i in arguments[0])arguments[0][v](i)&&(r[arguments[0][i]]=this.attrs[arguments[0][i]]);return r}if(2==arguments[m]){var s={};s[arguments[0]]=arguments[1],gt(this,s)}else 1==arguments[m]&&h.is(arguments[0],"object")&&gt(this,arguments[0]);return this},xt[b].toFront=function(){if(this.removed)return this;this.node.parentNode[c](this.node);var t=this.paper;return t.top!=this&&st(this,t),this},xt[b].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),at(this,this.paper);this.paper}return this},xt[b].insertAfter=function(t){if(this.removed)return this;var e=t.node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode[c](this.node),nt(this,t,this.paper),this},xt[b].insertBefore=function(t){if(this.removed)return this;var e=t.node;return e.parentNode.insertBefore(this.node,e),ot(this,t,this.paper),this};var mt=function(t,e,r,i){e=T(e),r=T(r);var s=ft("circle");t.canvas&&t.canvas[c](s);var a=new xt(s,t);return a.attrs={cx:e,cy:r,r:i,fill:"none",stroke:"#000"},a.type="circle",ft(s,a.attrs),a},bt=function(t,e,r,i,s,a){e=T(e),r=T(r);var n=ft("rect");t.canvas&&t.canvas[c](n);var o=new xt(n,t);return o.attrs={x:e,y:r,width:i,height:s,r:a||0,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},o.type="rect",ft(n,o.attrs),o},wt=function(t,e,r,i,s){e=T(e),r=T(r);var a=ft("ellipse");t.canvas&&t.canvas[c](a);var n=new xt(a,t);return n.attrs={cx:e,cy:r,rx:i,ry:s,fill:"none",stroke:"#000"},n.type="ellipse",ft(a,n.attrs),n},kt=function(t,e,r,i,s,a){var n=ft("image");ft(n,{x:r,y:i,width:s,height:a,preserveAspectRatio:"none"}),n.setAttributeNS(t.xlink,"href",e),t.canvas&&t.canvas[c](n);var o=new xt(n,t);return o.attrs={x:r,y:i,width:s,height:a,src:e},o.type="image",o},_t=function(t,e,r,i){var s=ft("text");ft(s,{x:e,y:r,"text-anchor":"middle"}),t.canvas&&t.canvas[c](s);var a=new xt(s,t);return a.attrs={x:e,y:r,"text-anchor":"middle",text:i,font:F.font,stroke:"none",fill:"#000"},a.type="text",gt(a,a.attrs),a},Bt=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas[R]("width",this.width),this.canvas[R]("height",this.height),this},Ct=function(){var t=et[f](null,arguments),e=t&&t.container,r=t.x,i=t.y,s=t.width,n=t.height;if(!e)throw new Error("SVG container not found.");var o=ft("svg");return s=s||512,n=n||342,ft(o,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:s,height:n}),1==e?(o.style.cssText="position:absolute;left:"+r+"px;top:"+i+"px",a.body[c](o)):e.firstChild?e.insertBefore(o,e.firstChild):e[c](o),e=new l,e.width=s,e.height=n,e.canvas=o,rt.call(e,e,h.fn),e.clear(),e};l[b].clear=function(){for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=ft("desc"))[c](a.createTextNode("Created with Rapha\xebl")),t[c](this.desc),t[c](this.defs=ft("defs"))},l[b].remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=ht(t)}}if(h.vml){var Nt=function(t){var e=/[ahqstv]/gi,r=D;if((t+p).match(e)&&(r=K),e=/[clmz]/g,r==D&&!(t+p).match(e)){var i={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},s=/([clmz]),?([^clmz]*)/gi,a=/-?[^,\s-]+/g,n=(t+p)[L](s,function(t,e,r){var s=[];return r[L](a,function(t){s[A](T(t))}),i[e]+s});return n}for(var o,h,l=r(t),n=[],c=0,f=l[m];f>c;c++){o=l[c],h=w.call(l[c][0]),"z"==h&&(h="x");for(var u=1,g=o[m];g>u;u++)h+=T(o[u])+(u!=g-1?",":p);n[A](h)}return n[x](d)};h[N]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var ut=function(t,e){var r=zt("group");r.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",r.coordsize=e.coordsize,r.coordorigin=e.coordorigin;var i=zt("shape"),s=i.style;s.width=e.width+"px",s.height=e.height+"px",i.coordsize=this.coordsize,i.coordorigin=this.coordorigin,r[c](i);var a=new xt(i,r,e);return a.isAbsolute=!0,a.type="path",a.path=[],a.Path=p,t&&gt(a,{fill:"none",stroke:"#000",path:t}),e.canvas[c](r),a},gt=function(t,e){t.attrs=t.attrs||{};var r,s=t.node,n=t.attrs,o=s.style,l=t;for(var f in e)e[v](f)&&(n[f]=e[f]);if(e.href&&(s.href=e.href),e.title&&(s.title=e.title),e.target&&(s.target=e.target),e.cursor&&(o.cursor=e.cursor),e.path&&"path"==t.type&&(n.path=e.path,s.path=Nt(n.path)),null!=e.rotation&&t.rotate(e.rotation,!0),e.translation&&(r=(e.translation+p)[g](i),Ht.call(t,r[0],r[1]),null!=t._.rt.cx&&(t._.rt.cx+=+r[0],t._.rt.cy+=+r[1],t.setBox(t.attrs,r[0],r[1]))),e.scale&&(r=(e.scale+p)[g](i),t.scale(+r[0]||1,+r[1]||+r[0]||1,+r[2]||null,+r[3]||null)),"clip-rect"in e){var u=(e["clip-rect"]+p)[g](i);if(4==u[m]){u[2]=+u[2]+ +u[0],u[3]=+u[3]+ +u[1];var d=s.clipRect||a.createElement("div"),y=d.style,x=s.parentNode;y.clip=h.format("rect({1}px {2}px {3}px {0}px)",u),s.clipRect||(y.position="absolute",y.top=0,y.left=0,y.width=t.paper.width+"px",y.height=t.paper.height+"px",x.parentNode.insertBefore(d,x),d[c](x),s.clipRect=d)}e["clip-rect"]||s.clipRect&&(s.clipRect.style.clip=p)}if("image"==t.type&&e.src&&(s.src=e.src),"image"==t.type&&e.opacity&&(s.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+100*e.opacity+")",o.filter=(s.filterMatrix||p)+(s.filterOpacity||p)),e.font&&(o.font=e.font),e["font-family"]&&(o.fontFamily='"'+e["font-family"][g](",")[0][L](/^['"]+|['"]+$/g,p)+'"'),e["font-size"]&&(o.fontSize=e["font-size"]),e["font-weight"]&&(o.fontWeight=e["font-weight"]),e["font-style"]&&(o.fontStyle=e["font-style"]),null!=e.opacity||null!=e["stroke-width"]||null!=e.fill||null!=e.stroke||null!=e["stroke-width"]||null!=e["stroke-opacity"]||null!=e["fill-opacity"]||null!=e["stroke-dasharray"]||null!=e["stroke-miterlimit"]||null!=e["stroke-linejoin"]||null!=e["stroke-linecap"]){s=t.shape||s;var b=s.getElementsByTagName("fill")&&s.getElementsByTagName("fill")[0],w=!1;if(!b&&(w=b=zt("fill")),"fill-opacity"in e||"opacity"in e){var k=((+n["fill-opacity"]+1||2)-1)*((+n.opacity+1||2)-1);0>k&&(k=0),k>1&&(k=1),b.opacity=k}if(e.fill&&(b.on=!0),(null==b.on||"none"==e.fill)&&(b.on=!1),b.on&&e.fill){var _=e.fill.match(M);_?(b.src=_[1],b.type="tile"):(b.color=h.getRGB(e.fill).hex,b.src=p,b.type="solid",h.getRGB(e.fill).error&&(l.type in{circle:1,ellipse:1}||"r"!=(e.fill+p).charAt())&&pt(l,e.fill)&&(n.fill="none",n.gradient=e.fill))}w&&s[c](b);var B=s.getElementsByTagName("stroke")&&s.getElementsByTagName("stroke")[0],C=!1;!B&&(C=B=zt("stroke")),(e.stroke&&"none"!=e.stroke||e["stroke-width"]||null!=e["stroke-opacity"]||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])&&(B.on=!0),("none"==e.stroke||null==B.on||0==e.stroke||0==e["stroke-width"])&&(B.on=!1),B.on&&e.stroke&&(B.color=h.getRGB(e.stroke).hex);var k=((+n["stroke-opacity"]+1||2)-1)*((+n.opacity+1||2)-1),N=.75*(q(e["stroke-width"])||1);if(0>k&&(k=0),k>1&&(k=1),null==e["stroke-width"]&&(N=n["stroke-width"]),e["stroke-width"]&&(B.weight=N),N&&1>N&&(k*=N)&&(B.weight=1),B.opacity=k,e["stroke-linejoin"]&&(B.joinstyle=e["stroke-linejoin"]||"miter"),B.miterlimit=e["stroke-miterlimit"]||8,e["stroke-linecap"]&&(B.endcap="butt"==e["stroke-linecap"]?"flat":"square"==e["stroke-linecap"]?"square":"round"),e["stroke-dasharray"]){var z={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};B.dashstyle=z[v](e["stroke-dasharray"])?z[e["stroke-dasharray"]]:p}C&&s[c](B)}if("text"==l.type){var o=l.paper.span.style;switch(n.font&&(o.font=n.font),n["font-family"]&&(o.fontFamily=n["font-family"]),n["font-size"]&&(o.fontSize=n["font-size"]),n["font-weight"]&&(o.fontWeight=n["font-weight"]),n["font-style"]&&(o.fontStyle=n["font-style"]),l.node.string&&(l.paper.span.innerHTML=(l.node.string+p)[L](/</g,"&#60;")[L](/&/g,"&#38;")[L](/\n/g,"<br>")),l.W=n.w=l.paper.span.offsetWidth,l.H=n.h=l.paper.span.offsetHeight,l.X=n.x,l.Y=n.y+T(l.H/2),n["text-anchor"]){case"start":l.node.style["v-text-align"]="left",l.bbx=T(l.W/2);break;case"end":l.node.style["v-text-align"]="right",l.bbx=-T(l.W/2);break;default:l.node.style["v-text-align"]="center"}}},pt=function(t,e){t.attrs=t.attrs||{};var r=(t.attrs,t.node.getElementsByTagName("fill")),i="linear",s=".5 .5";if(t.attrs.gradient=e,e=(e+p)[L](lt,function(t,e,r){return i="radial",e&&r&&(e=q(e),r=q(r),G(e-.5,2)+G(r-.5,2)>.25&&(r=k.sqrt(.25-G(e-.5,2))*(2*(r>.5)-1)+.5),s=e+d+r),p}),e=e[g](/\s*\-\s*/),"linear"==i){var a=e.shift();if(a=-q(a),isNaN(a))return null}var n=tt(e);if(!n)return null;if(t=t.shape||t.node,r=r[0]||zt("fill"),n[m]){r.on=!0,r.method="none",r.type="radial"==i?"gradientradial":"gradient",r.color=n[0].color,r.color2=n[n[m]-1].color;for(var o=[],h=0,l=n[m];l>h;h++)n[h].offset&&o[A](n[h].offset+d+n[h].color);r.colors&&(r.colors.value=o[m]?o[x](","):"0% "+r.color),"radial"==i?(r.focus="100%",r.focussize=s,r.focusposition=s):r.angle=(270-a)%360}return 1},xt=function(t,e,r){this[0]=t,this.id=h._oid++,this.node=t,t.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=e,this.paper=r,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null};xt[b].rotate=function(t,e,r){return this.removed?this:null==t?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][x](d):this._.rt.deg:(t=(t+p)[g](i),t[m]-1&&(e=q(t[1]),r=q(t[2])),t=q(t[0]),null!=e?this._.rt.deg=t:this._.rt.deg+=t,null==r&&(e=null),this._.rt.cx=e,this._.rt.cy=r,this.setBox(this.attrs,e,r),this.Group.style.rotation=this._.rt.deg,this)},xt[b].setBox=function(t,e,r){if(this.removed)return this;var i=this.Group.style,s=this.shape&&this.shape.style||this.node.style;t=t||{};for(var a in t)t[v](a)&&(this.attrs[a]=t[a]);e=e||this._.rt.cx,r=r||this._.rt.cy;var n,o,h,l,f=this.attrs;switch(this.type){case"circle":n=f.cx-f.r,o=f.cy-f.r,h=l=2*f.r;break;case"ellipse":n=f.cx-f.rx,o=f.cy-f.ry,h=2*f.rx,l=2*f.ry;break;case"rect":case"image":n=+f.x,o=+f.y,h=f.width||0,l=f.height||0;break;case"text":this.textpath.v=["m",T(f.x),", ",T(f.y-2),"l",T(f.x)+1,", ",T(f.y-2)][x](p),n=f.x-T(this.W/2),o=f.y-this.H/2,h=this.W,l=this.H;break;case"path":if(this.attrs.path){var u=Y(this.attrs.path);n=u.x,o=u.y,h=u.width,l=u.height}else n=0,o=0,h=this.paper.width,l=this.paper.height;break;default:n=0,o=0,h=this.paper.width,l=this.paper.height}e=null==e?n+h/2:e,r=null==r?o+l/2:r;var d=e-this.paper.width/2,g=r-this.paper.height/2;if("path"==this.type||"text"==this.type)i.left!=d+"px"&&(i.left=d+"px"),i.top!=g+"px"&&(i.top=g+"px"),this.X="text"==this.type?n:-d,
this.Y="text"==this.type?o:-g,this.W=h,this.H=l,s.left!=-d+"px"&&(s.left=-d+"px"),s.top!=-g+"px"&&(s.top=-g+"px");else{i.left!=d+"px"&&(i.left=d+"px"),i.top!=g+"px"&&(i.top=g+"px"),this.X=n,this.Y=o,this.W=h,this.H=l,i.width!=this.paper.width+"px"&&(i.width=this.paper.width+"px"),i.height!=this.paper.height+"px"&&(i.height=this.paper.height+"px"),s.left!=n-d+"px"&&(s.left=n-d+"px"),s.top!=o-g+"px"&&(s.top=o-g+"px"),s.width!=h+"px"&&(s.width=h+"px"),s.height!=l+"px"&&(s.height=l+"px");var y=(+t.r||0)/B(h,l);if("rect"==this.type&&this.arcsize.toFixed(4)!=y.toFixed(4)&&(y||this.arcsize)){var b=zt("roundrect"),w={},a=0,k=this.events&&this.events[m];b.arcsize=y,b.raphael=this,this.Group[c](b),this.Group.removeChild(this.node),this[0]=this.node=b,this.arcsize=y;for(var a in f)w[a]=f[a];if(delete w.scale,this.attr(w),this.events)for(;k>a;a++)this.events[a].unbind=At(this.node,this.events[a].name,this.events[a].f,this)}}},xt[b].hide=function(){return!this.removed&&(this.Group.style.display="none"),this},xt[b].show=function(){return!this.removed&&(this.Group.style.display="block"),this},xt[b].getBBox=function(){return this.removed?this:"path"==this.type?Y(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},xt[b].remove=function(){if(!this.removed){it(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)delete this[t];this.removed=!0}},xt[b].attr=function(){if(this.removed)return this;if(0==arguments[m]){var t={};for(var e in this.attrs)this.attrs[v](e)&&(t[e]=this.attrs[e]);return this._.rt.deg&&(t.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(t.scale=this.scale()),t.gradient&&"none"==t.fill&&(t.fill=t.gradient)&&delete t.gradient,t}if(1==arguments[m]&&h.is(arguments[0],"string"))return"translation"==arguments[0]?Ht.call(this):"rotation"==arguments[0]?this.rotate():"scale"==arguments[0]?this.scale():"fill"==arguments[0]&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[arguments[0]];if(this.attrs&&1==arguments[m]&&h.is(arguments[0],"array")){for(var r={},e=0,i=arguments[0][m];i>e;e++)r[arguments[0][e]]=this.attrs[arguments[0][e]];return r}var s;return 2==arguments[m]&&(s={},s[arguments[0]]=arguments[1]),1==arguments[m]&&h.is(arguments[0],"object")&&(s=arguments[0]),s&&(s.text&&"text"==this.type&&(this.node.string=s.text),gt(this,s),s.gradient&&({circle:1,ellipse:1}[v](this.type)||"r"!=(s.gradient+p).charAt())&&pt(this,s.gradient),("path"!=this.type||this._.rt.deg)&&this.setBox(this.attrs)),this},xt[b].toFront=function(){return!this.removed&&this.Group.parentNode[c](this.Group),this.paper.top!=this&&st(this,this.paper),this},xt[b].toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),at(this,this.paper)),this)},xt[b].insertAfter=function(t){return this.removed?this:(t.Group.nextSibling?t.Group.parentNode.insertBefore(this.Group,t.Group.nextSibling):t.Group.parentNode[c](this.Group),nt(this,t,this.paper),this)},xt[b].insertBefore=function(t){return this.removed?this:(t.Group.parentNode.insertBefore(this.Group,t.Group),ot(this,t,this.paper),this)};var zt,mt=function(t,e,r,i){var s=zt("group"),a=zt("oval");a.style;s.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",s.coordsize=t.coordsize,s.coordorigin=t.coordorigin,s[c](a);var n=new xt(a,s,t);return n.type="circle",gt(n,{stroke:"#000",fill:"none"}),n.attrs.cx=e,n.attrs.cy=r,n.attrs.r=i,n.setBox({x:e-i,y:r-i,width:2*i,height:2*i}),t.canvas[c](s),n},bt=function(t,e,r,i,s,a){var n=zt("group"),o=zt("roundrect"),h=(+a||0)/B(i,s);n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=t.coordsize,n.coordorigin=t.coordorigin,n[c](o),o.arcsize=h;var l=new xt(o,n,t);return l.type="rect",gt(l,{stroke:"#000"}),l.arcsize=h,l.setBox({x:e,y:r,width:i,height:s,r:a}),t.canvas[c](n),l},wt=function(t,e,r,i,s){var a=zt("group"),n=zt("oval");n.style;a.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",a.coordsize=t.coordsize,a.coordorigin=t.coordorigin,a[c](n);var o=new xt(n,a,t);return o.type="ellipse",gt(o,{stroke:"#000"}),o.attrs.cx=e,o.attrs.cy=r,o.attrs.rx=i,o.attrs.ry=s,o.setBox({x:e-i,y:r-s,width:2*i,height:2*s}),t.canvas[c](a),o},kt=function(t,e,r,i,s,a){var n=zt("group"),o=zt("image");o.style;n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=t.coordsize,n.coordorigin=t.coordorigin,o.src=e,n[c](o);var h=new xt(o,n,t);return h.type="image",h.attrs.src=e,h.attrs.x=r,h.attrs.y=i,h.attrs.w=s,h.attrs.h=a,h.setBox({x:r,y:i,width:s,height:a}),t.canvas[c](n),h},_t=function(t,e,r,i){var s=zt("group"),a=zt("shape"),n=a.style,o=zt("path"),l=(o.style,zt("textpath"));s.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",s.coordsize=t.coordsize,s.coordorigin=t.coordorigin,o.v=h.format("m{0},{1}l{2},{1}",T(e),T(r),T(e)+1),o.textpathok=!0,n.width=t.width,n.height=t.height,l.string=i+p,l.on=!0,a[c](l),a[c](o),s[c](a);var f=new xt(l,s,t);return f.shape=a,f.textpath=o,f.type="text",f.attrs.text=i,f.attrs.x=e,f.attrs.y=r,f.attrs.w=1,f.attrs.h=1,gt(f,{font:F.font,stroke:"none",fill:"#000"}),f.setBox(),t.canvas[c](s),f},Bt=function(t,e){var r=this.canvas.style;return t==+t&&(t+="px"),e==+e&&(e+="px"),r.width=t,r.height=e,r.clip="rect(0 "+t+" "+e+" 0)",this};a.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!a.namespaces.rvml&&a.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),zt=function(t){return a.createElement("<rvml:"+t+' class="rvml">')}}catch(Gt){zt=function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}var Ct=function(){var t=et[f](null,arguments),e=t.container,r=t.height,i=t.width,s=t.x,n=t.y;if(!e)throw new Error("VML container not found.");var o=new l,u=o.canvas=a.createElement("div"),p=u.style;return i=i||512,r=r||342,i==+i&&(i+="px"),r==+r&&(r+="px"),o.width=1e3,o.height=1e3,o.coordsize="1000 1000",o.coordorigin="0 0",o.span=a.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",u[c](o.span),p.cssText=h.format("width:{0};height:{1};position:absolute;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==e?(a.body[c](u),p.left=s+"px",p.top=n+"px"):(e.style.width=i,e.style.height=r,e.firstChild?e.insertBefore(u,e.firstChild):e[c](u)),rt.call(o,o,h.fn),o};l[b].clear=function(){this.canvas.innerHTML=p,this.span=a.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[c](this.span),this.bottom=this.top=null},l[b].remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=ht(t)}}!/^Apple|^Google/.test(navigator.vendor)||navigator.userAgent.indexOf("Version/4.0")+1?l[b].safari=function(){}:l[b].safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99);setTimeout(function(){t.remove()})};for(var At=function(){return a.addEventListener?function(t,e,r,i){var s=function(t){return r.call(i,t)};return t.addEventListener(e,s,!1),function(){return t.removeEventListener(e,s,!1),!0}}:a.attachEvent?function(t,e,r,i){var s=function(t){return r.call(i,t||n.event)};t.attachEvent("on"+e,s);var a=function(){return t.detachEvent("on"+e,s),!0};return a}:void 0}(),St=y[m];St--;)!function(t){xt[b][t]=function(e){return h.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:At(this.shape||this.node,t,e,this)})),this},xt[b]["un"+t]=function(e){for(var r=this.events,i=r[m];i--;)if(r[i].name==t&&r[i].f==e)return r[i].unbind(),r.splice(i,1),!r.length&&delete this.events,this;return this}}(y[St]);xt[b].hover=function(t,e){return this.mouseover(t).mouseout(e)},xt[b].unhover=function(t,e){return this.unmouseover(t).unmouseout(e)},l[b].circle=function(t,e,r){return mt(this,t||0,e||0,r||0)},l[b].rect=function(t,e,r,i,s){return bt(this,t||0,e||0,r||0,i||0,s||0)},l[b].ellipse=function(t,e,r,i){return wt(this,t||0,e||0,r||0,i||0)},l[b].path=function(t){return t&&!h.is(t,"string")&&!h.is(t[0],"array")&&(t+=p),ut(h.format[f](h,arguments),this)},l[b].image=function(t,e,r,i,s){return kt(this,t||"about:blank",e||0,r||0,i||0,s||0)},l[b].text=function(t,e,r){return _t(this,t||0,e||0,r||p)},l[b].set=function(t){return arguments[m]>1&&(t=Array[b].splice.call(arguments,0,arguments[m])),new Lt(t)},l[b].setSize=Bt,l[b].top=l[b].bottom=null,l[b].raphael=h,xt[b].scale=function(t,r,i,s){if(null==t&&null==r)return{x:this._.sx,y:this._.sy,toString:e};r=r||t,!+r&&(r=t);var a,n,o=this.attrs;if(0!=t){var h=this.getBBox(),l=h.x+h.width/2,c=h.y+h.height/2,f=t/this._.sx,g=r/this._.sy;i=+i||0==i?i:l,s=+s||0==s?s:c;var y=~~(t/k.abs(t)),v=~~(r/k.abs(r)),b=this.node.style,w=i+(l-i)*f,_=s+(c-s)*g;switch(this.type){case"rect":case"image":var C=o.width*y*f,N=o.height*v*g;this.attr({height:N,r:o.r*B(y*f,v*g),width:C,x:w-C/2,y:_-N/2});break;case"circle":case"ellipse":this.attr({rx:o.rx*y*f,ry:o.ry*v*g,r:o.r*B(y*f,v*g),cx:w,cy:_});break;case"path":for(var z=X(o.path),G=!0,A=0,S=z[m];S>A;A++){var M,j=z[A],T=V.call(j[0]);if("M"!=T||!G)if(G=!1,"A"==T)j[z[A][m]-2]*=f,j[z[A][m]-1]*=g,j[1]*=y*f,j[2]*=v*g,j[5]=+(y+v?!!+j[5]:!+j[5]);else if("H"==T)for(M=1,jj=j[m];M<jj;M++)j[M]*=f;else if("V"==T)for(M=1,jj=j[m];M<jj;M++)j[M]*=g;else for(M=1,jj=j[m];M<jj;M++)j[M]*=M%2?f:g}var q=Y(z),a=w-q.x-q.width/2,n=_-q.y-q.height/2;z[0][1]+=a,z[0][2]+=n,this.attr({path:z})}this.type in{text:1,image:1}&&(1!=y||1!=v)?this.transformations?(this.transformations[2]="scale("[u](y,",",v,")"),this.node[R]("transform",this.transformations[x](d)),a=-1==y?-o.x-(C||0):o.x,n=-1==v?-o.y-(N||0):o.y,this.attr({x:a,y:n}),o.fx=y-1,o.fy=v-1):(this.node.filterMatrix=" progid:DXImageTransform.Microsoft.Matrix(M11="[u](y,", M12=0, M21=0, M22=",v,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),b.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)):this.transformations?(this.transformations[2]=p,this.node[R]("transform",this.transformations[x](d)),o.fx=0,o.fy=0):(this.node.filterMatrix=p,b.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)),o.scale=[t,r,i,s][x](d),this._.sx=t,this._.sy=r}return this},xt[b].clone=function(){var t=this.attr();return delete t.scale,delete t.translation,this.paper[this.type]().attr(t)};var Mt=function(t,e){return function(r,i,s){r=K(r);for(var a,n,o,l,c,f="",u={},p=0,d=0,g=r.length;g>d;d++){if(o=r[d],"M"==o[0])a=+o[1],n=+o[2];else{if(l=jt(a,n,o[1],o[2],o[3],o[4],o[5],o[6]),p+l>i){if(e&&!u.start){if(c=h.findDotsAtSegment(a,n,o[1],o[2],o[3],o[4],o[5],o[6],(i-p)/l),f+=["C",c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],s)return f;u.start=f,f=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,o[5],o[6]][x](),p+=l,a=+o[5],n=+o[6];continue}if(!t&&!e)return c=h.findDotsAtSegment(a,n,o[1],o[2],o[3],o[4],o[5],o[6],(i-p)/l),{x:c.x,y:c.y,alpha:c.alpha}}p+=l,a=+o[5],n=+o[6]}f+=o}return u.end=f,c=t?p:e?u:h.findDotsAtSegment(a,n,o[1],o[2],o[3],o[4],o[5],o[6],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},jt=t(function(t,e,r,i,s,a,n,o){for(var h={x:0,y:0},l=0,c=0;1.01>c;c+=.01){var f=Q(t,e,r,i,s,a,n,o,c);c&&(l+=k.sqrt(G(h.x-f.x,2)+G(h.y-f.y,2))),h=f}return l}),Tt=Mt(1),Rt=Mt(),qt=Mt(0,1);xt[b].getTotalLength=function(){return"path"==this.type?Tt(this.attrs.path):void 0},xt[b].getPointAtLength=function(t){return"path"==this.type?Rt(this.attrs.path,t):void 0},xt[b].getSubpath=function(t,e){if("path"==this.type){if(k.abs(this.getTotalLength()-e)<1e-6)return qt(this.attrs.path,t).end;var r=qt(this.attrs.path,e,1);return t?qt(r,t).end:r}},h.easing_formulas={linear:function(t){return t},"<":function(t){return G(t,3)},">":function(t){return G(t-1,3)+1},"<>":function(t){return t=2*t,1>t?G(t,3)/2:(t-=2,(G(t,3)+2)/2)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){if(0==t||1==t)return t;var e=.3,r=e/4;return G(2,-10*t)*k.sin((t-r)*(2*k.PI)/e)+1},bounce:function(t){var e,r=7.5625,i=2.75;return 1/i>t?e=r*t*t:2/i>t?(t-=1.5/i,e=r*t*t+.75):2.5/i>t?(t-=2.25/i,e=r*t*t+.9375):(t-=2.625/i,e=r*t*t+.984375),e}};var Et={length:0},Vt=function(){var t=+new Date;for(var e in Et)if("length"!=e&&Et[v](e)){var r=Et[e];if(r.stop){delete Et[e],Et[m]--;continue}var i,s=t-r.start,a=r.ms,n=r.easing,o=r.from,l=r.diff,c=r.to,f=r.t,u=r.prev||0,g=r.el,y=r.callback,b={};if(a>s){var w=h.easing_formulas[n]?h.easing_formulas[n](s/a):s/a;for(var k in o)if(o[v](k)){switch(H[k]){case"along":i=w*a*l[k],c.back&&(i=c.len-i);var _=Rt(c[k],i);g.translate(l.sx-l.x||0,l.sy-l.y||0),l.x=_.x,l.y=_.y,g.translate(_.x-l.sx,_.y-l.sy),c.rot&&g.rotate(l.r+_.alpha,_.x,_.y);break;case"number":i=+o[k]+w*a*l[k];break;case"colour":i="rgb("+[Ft(T(o[k].r+w*a*l[k].r)),Ft(T(o[k].g+w*a*l[k].g)),Ft(T(o[k].b+w*a*l[k].b))][x](",")+")";break;case"path":i=[];for(var B=0,C=o[k][m];C>B;B++){i[B]=[o[k][B][0]];for(var N=1,z=o[k][B][m];z>N;N++)i[B][N]=+o[k][B][N]+w*a*l[k][B][N];i[B]=i[B][x](d)}i=i[x](d);break;case"csv":switch(k){case"translation":var G=l[k][0]*(s-u),A=l[k][1]*(s-u);f.x+=G,f.y+=A,i=G+d+A;break;case"rotation":i=+o[k][0]+w*a*l[k][0],o[k][1]&&(i+=","+o[k][1]+","+o[k][2]);break;case"scale":i=[+o[k][0]+w*a*l[k][0],+o[k][1]+w*a*l[k][1],2 in c[k]?c[k][2]:p,3 in c[k]?c[k][3]:p][x](d);break;case"clip-rect":i=[];for(var B=4;B--;)i[B]=+o[k][B]+w*a*l[k][B]}}b[k]=i}g.attr(b),g._run&&g._run.call(g)}else{if(c.along){var _=Rt(c.along,c.len*!c.back);g.translate(l.sx-(l.x||0)+_.x-l.sx,l.sy-(l.y||0)+_.y-l.sy),c.rot&&g.rotate(l.r+_.alpha,_.x,_.y)}(f.x||f.y)&&g.translate(-f.x,-f.y),c.scale&&(c.scale=c.scale+p),g.attr(c),delete Et[e],Et[m]--,g.in_animation=null,h.is(y,"function")&&y.call(g)}r.prev=s}h.svg&&g&&g.paper.safari(),Et[m]&&setTimeout(Vt)},Ft=function(t){return t>255?255:0>t?0:t},Ht=function(t,r){if(null==t)return{x:this._.tx,y:this._.ty,toString:e};switch(this._.tx+=+t,this._.ty+=+r,this.type){case"circle":case"ellipse":this.attr({cx:+t+this.attrs.cx,cy:+r+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+t+this.attrs.x,y:+r+this.attrs.y});break;case"path":var i=X(this.attrs.path);i[0][1]+=+t,i[0][2]+=+r,this.attr({path:i})}return this};xt[b].animateWith=function(t,e,r,i,s){return Et[t.id]&&(e.start=Et[t.id].start),this.animate(e,r,i,s)},xt[b].animateAlong=r(),xt[b].animateAlongBack=r(1),xt[b].onAnimation=function(t){return this._run=t||0,this},xt[b].animate=function(t,e,r,s){(h.is(r,"function")||!r)&&(s=r||null);var a={},n={},o={};for(var l in t)if(t[v](l)&&H[v](l))switch(a[l]=this.attr(l),null==a[l]&&(a[l]=F[l]),n[l]=t[l],H[l]){case"along":var c=Tt(t[l]),f=Rt(t[l],c*!!t.back),u=this.getBBox();o[l]=c/e,o.tx=u.x,o.ty=u.y,o.sx=f.x,o.sy=f.y,n.rot=t.rot,n.back=t.back,n.len=c,t.rot&&(o.r=q(this.rotate())||0);break;case"number":o[l]=(n[l]-a[l])/e;break;case"colour":a[l]=h.getRGB(a[l]);var d=h.getRGB(n[l]);o[l]={r:(d.r-a[l].r)/e,g:(d.g-a[l].g)/e,b:(d.b-a[l].b)/e};break;case"path":var y=K(a[l],n[l]);a[l]=y[0];var x=y[1];o[l]=[];for(var b=0,w=a[l][m];w>b;b++){o[l][b]=[0];for(var k=1,_=a[l][b][m];_>k;k++)o[l][b][k]=(x[b][k]-a[l][b][k])/e}break;case"csv":var B=(t[l]+p)[g](i),C=(a[l]+p)[g](i);switch(l){case"translation":a[l]=[0,0],o[l]=[B[0]/e,B[1]/e];break;case"rotation":a[l]=C[1]==B[1]&&C[2]==B[2]?C:[0,B[1],B[2]],o[l]=[(B[0]-a[l][0])/e,0,0];break;case"scale":t[l]=B,a[l]=(a[l]+p)[g](i),o[l]=[(B[0]-a[l][0])/e,(B[1]-a[l][1])/e,0,0];break;case"clip-rect":a[l]=(a[l]+p)[g](i),o[l]=[];for(var b=4;b--;)o[l][b]=(B[b]-a[l][b])/e}n[l]=B}return this.stop(),this.in_animation=1,Et[this.id]={start:t.start||+new Date,ms:e,easing:r,from:a,diff:o,to:n,el:this,callback:s,t:{x:0,y:0}},1==++Et[m]&&Vt(),this},xt[b].stop=function(){return Et[this.id]&&Et[m]--,delete Et[this.id],this},xt[b].translate=function(t,e){return this.attr({translation:t+" "+e})},xt[b][N]=function(){return"Rapha\xebl\u2019s object"},h.ae=Et;var Lt=function(t){if(this.items=[],this[m]=0,t)for(var e=0,r=t[m];r>e;e++)!t[e]||t[e].constructor!=xt&&t[e].constructor!=Lt||(this[this.items[m]]=this.items[this.items[m]]=t[e],this[m]++)};Lt[b][A]=function(){for(var t,e,r=0,i=arguments[m];i>r;r++)t=arguments[r],!t||t.constructor!=xt&&t.constructor!=Lt||(e=this.items[m],this[e]=this.items[e]=t,this[m]++);return this},Lt[b].pop=function(){return delete this[this[m]--],this.items.pop()};for(var Wt in xt[b])xt[b][v](Wt)&&(Lt[b][Wt]=function(t){return function(){for(var e=0,r=this.items[m];r>e;e++)this.items[e][t][f](this.items[e],arguments);return this}}(Wt));return Lt[b].attr=function(t,e){if(t&&h.is(t,"array")&&h.is(t[0],"object"))for(var r=0,i=t[m];i>r;r++)this.items[r].attr(t[r]);else for(var s=0,a=this.items[m];a>s;s++)this.items[s].attr[f](this.items[s],arguments);return this},Lt[b].animate=function(t,e,r,i){(h.is(r,"function")||!r)&&(i=r||null);var s,a=this.items[m],n=a,o=this;for(i&&(s=function(){!--a&&i.call(o)}),this.items[--n].animate(t,e,r||s,s);n--;)this.items[n].animateWith(this.items[a-1],t,e,r||s,s);return this},Lt[b].insertAfter=function(t){for(var e=this.items[m];e--;)this.items[e].insertAfter(t);return this},Lt[b].getBBox=function(){for(var t=[],e=[],r=[],i=[],s=this.items[m];s--;){var a=this.items[s].getBBox();t[A](a.x),e[A](a.y),r[A](a.x+a.width),i[A](a.y+a.height)}return t=B[f](0,t),e=B[f](0,e),{x:t,y:e,width:_[f](0,r)-t,height:_[f](0,i)-e}},h.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var i in t.face)t.face[v](i)&&(e.face[i]=t.face[i]);if(this.fonts[r]?this.fonts[r][A](e):this.fonts[r]=[e],!t.svg){e.face["units-per-em"]=E(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[v](s)){var a=t.glyphs[s];if(e.glyphs[s]={w:a.w,k:{},d:a.d&&"M"+a.d[L](/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var n in a.k)a[v](n)&&(e.glyphs[s].k[n]=a.k[n])}}return t},l[b].getFont=function(t,e,r,i){i=i||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;var s=h.fonts[t];if(!s){var a=new RegExp("(^|\\s)"+t[L](/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var n in h.fonts)if(h.fonts[v](n)&&a.test(n)){s=h.fonts[n];break}}var o;if(s)for(var l=0,c=s[m];c>l&&(o=s[l],o.face["font-weight"]!=e||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=i);l++);return o},l[b].print=function(t,e,r,s,a,n){n=n||"middle";var o,l=this.set(),c=(r+p)[g](p),f=0;if(h.is(s,"string")&&(s=this.getFont(s)),s){o=(a||16)/s.face["units-per-em"];for(var u=s.face.bbox.split(i),d=+u[0],y=+u[1]+("baseline"==n?u[3]-u[1]+ +s.face.descent:(u[3]-u[1])/2),v=0,x=c[m];x>v;v++){var b=v&&s.glyphs[c[v-1]]||{},w=s.glyphs[c[v]];f+=v?(b.w||s.w)+(b.k&&b.k[c[v]]||0):0,w&&w.d&&l[A](this.path(w.d).attr({fill:"#000",stroke:"none",translation:[f,0]}))}l.scale(o,o,d,y).translate(t-d,e-y)}return l},h.format=function(t){var e=h.is(arguments[1],"array")?[0][u](arguments[1]):arguments,r=/\{(\d+)\}/g;return t&&h.is(t,"string")&&e[m]-1&&(t=t[L](r,function(t,r){return null==e[++r]?p:e[r]})),t||p},h.ninja=function(){var t=Raphael;return o.was?Raphael=o.is:delete Raphael,t},h.el=xt[b],h}();